# 台股主力資金篩選器 - 日期同步修正版

## 🎯 版本特色

本版本專門修正了**個股價格日期與資料日期不一致**的問題，確保所有日期顯示的準確性和一致性。

### ✅ 核心修正
- **日期統一**: 所有個股價格日期與系統資料日期完全一致
- **民國年支援**: 正確處理台灣證交所的民國年日期格式
- **顯示優化**: 統一的日期顯示格式，消除用戶困惑

### 🔧 技術改進
- 新增民國年日期轉換函數
- 統一資料日期管理機制
- 優化日期顯示邏輯

## 📊 功能特色

### 🎯 **主力資金篩選**
- **Pine Script標準**: 100%符合TradingView Pine Script技術分析邏輯
- **黃柱信號**: 精準識別主力資金進場時機
- **1044支股票**: 覆蓋全部台灣上市股票

### 📈 **技術指標系統**
- **資金流向**: 14期Money Flow Index，識別資金進出
- **多空線**: 34期高低點基礎的13期EMA，判斷趨勢方向
- **量比分析**: 當日成交量/近5日平均成交量，識別異常放量

### 🎨 **前端增強功能**
- **成交張數**: 符合台股習慣的張數顯示（1張=1000股）
- **趨勢箭頭**: 即時顯示各指標變化方向（↑↓→）
- **量比標示**: 顏色標示異常放量（紅色>2.0倍，橙色1.5-2.0倍）
- **台灣時間**: 所有時間顯示均為台灣本地時間

## 🚀 部署指南

### Render.com 部署
```
Name: taiwan-stock-date-sync
Environment: Python
Build Command: pip install --no-cache-dir -r requirements.txt
Start Command: gunicorn -c gunicorn.conf.py app:app
```

### 本地開發
```bash
# 安裝依賴
pip install -r requirements.txt

# 啟動服務
python app.py
```

## 📋 使用流程

### 1. 更新股票資料
點擊「更新股票資料」按鈕，系統將：
- 從台灣證券交易所API獲取最新資料
- 處理1044支上市股票（代碼1000-9999）
- 統一設定資料日期，確保一致性

### 2. 開始篩選
點擊「開始篩選」按鈕，系統將：
- 分析所有股票的Pine Script技術指標
- 識別符合黃柱條件的股票
- 按評分排序顯示結果

### 3. 查看結果
篩選結果包含：
- **股票代碼**: 台股代碼
- **股票名稱**: 公司名稱
- **股價**: 最新收盤價
- **漲跌幅**: 當日漲跌百分比
- **成交張數**: 當日成交量（張）+ 趨勢箭頭
- **量比**: 成交量倍數 + 顏色標示
- **資金流向**: 技術指標數值 + 趨勢箭頭
- **多空線**: 技術指標數值 + 趨勢箭頭
- **訊號狀態**: 🟡黃柱信號 或其他狀態
- **評分**: 0-100分的投資參考評分
- **價格日期**: 統一的資料日期（民國年格式）

## 🟡 黃柱信號說明

### 形成條件
黃柱信號需要同時滿足兩個條件：
1. **Crossover**: 資金流向向上突破多空線
2. **超賣區域**: 多空線 < 25

### 投資意義
- **主力進場**: 表示主力資金開始流入
- **超賣反彈**: 在超賣區域出現，安全邊際較高
- **技術突破**: 資金流向突破多空線，動能確認

### 使用建議
- **分批進場**: 首次建議不超過50%倉位
- **止損設置**: 建議5-8%止損點
- **量比確認**: 配合1.5-3.0倍量比效果更佳
- **環境分析**: 結合市場整體環境判斷

## 📊 技術指標詳解

### 資金流向 (Money Flow Index)
- **計算方式**: 基於14期典型價格和成交量
- **數值範圍**: 0-100
- **關鍵水準**: 
  - 0-20: 極度超賣
  - 20-30: 超賣區域（黃柱機會）
  - 70-80: 超買區域
  - 80-100: 極度超買

### 多空線 (Bull Bear Line)
- **計算方式**: 34期高低點基礎的13期EMA
- **關鍵水準**: 25以下為超賣區域
- **作用**: 
  - 動態支撐阻力
  - 趨勢方向判斷
  - 黃柱信號必要條件

### 量比 (Volume Ratio)
- **計算方式**: 當日成交量 ÷ 近5日平均成交量
- **標準**: 
  - < 0.8倍: 縮量（灰色）
  - 0.8-1.5倍: 正常（黑色）
  - 1.5-2.0倍: 明顯放量（橙色）
  - > 2.0倍: 異常放量（紅色粗體）

## ⚠️ 風險提醒

### 投資風險
- 技術分析僅供參考，不構成投資建議
- 股市投資有風險，請謹慎評估自身風險承受能力
- 建議配合基本面分析和市場環境判斷

### 系統限制
- 資料來源依賴台灣證券交易所API
- 歷史資料獲取可能受網路狀況影響
- 技術指標計算需要足夠的歷史資料（至少34天）

## 🔧 技術架構

### 後端技術
- **Flask**: Python Web框架
- **CORS**: 跨域請求支援
- **Requests**: HTTP請求處理
- **Threading**: 多線程處理

### 資料來源
- **台灣證券交易所**: 即時股價資料
- **Yahoo Finance**: 歷史資料（技術指標計算）
- **Manus API Hub**: 備用資料來源

### 部署環境
- **Render.com**: 雲端部署平台
- **Gunicorn**: WSGI HTTP服務器
- **Python 3.11**: 運行環境

## 📞 技術支援

如有技術問題或建議，請聯繫開發團隊。

---

**免責聲明**: 本系統僅供技術分析參考，不構成投資建議。投資有風險，請謹慎決策。

